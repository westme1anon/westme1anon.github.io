import{o as $,i as ee}from"./lifecycle.5Ap2lG4L.js";import{l as E,k as ae,e as A,f as te,t as F,g as e,a as j,p as re,b as ie,s as n,i as l,m as g,h as c,r as d,u as b,j as B}from"./template.u9TWndYC.js";import{s as ne}from"./render.CEs9TuJY.js";import{e as se,i as oe}from"./each.Dn1gkYdv.js";import{I as w,h as le}from"./Icon.DbanfNGG.js";import{r as C,s as K}from"./props.B8XIlXrz.js";import{e as P}from"./utils.BZ1KpxG4.js";import{b as V}from"./input.DwOSUfyi.js";import{I as W}from"./zh_TW.12WzXWON.js";import{i as Y}from"./translation.RNxcUQCy.js";import{u as q}from"./url-utils.7_L8JPzD.js";import{n as ce}from"./navigation-utils.Cc6bKnia.js";import{panelManager as S}from"./panel-manager.BYknToDe.js";/* empty css                        */import"./functions.WhpeioxD.js";import"./if.DvYlwJjJ.js";import"./config.DloxKmO1.js";var de=A(`<a class="transition first-of-type:mt-2 lg:first-of-type:mt-0 group block
       rounded-xl text-lg px-3 py-2 hover:bg-[var(--btn-plain-bg-hover)] active:bg-[var(--btn-plain-bg-active)]"><div class="transition text-90 inline-flex font-bold group-hover:text-[var(--primary)]"> <!></div> <div class="transition text-sm text-50"><!></div></a>`),fe=A(`<div id="search-bar" class="hidden lg:flex transition-all items-center h-11 mr-2 rounded-lg
      bg-black/[0.04] hover:bg-black/[0.06] focus-within:bg-black/[0.06]
      dark:bg-white/5 dark:hover:bg-white/10 dark:focus-within:bg-white/10
"><!> <input class="transition-all pl-10 text-sm bg-transparent outline-0
         h-full w-40 active:w-60 focus:w-60 text-black/50 dark:text-white/50 svelte-1wah7ro"/></div> <button aria-label="Search Panel" id="search-switch" class="btn-plain scale-animation lg:!hidden rounded-lg w-11 h-11 active:scale-90"><!></button> <div id="search-panel" class="float-panel float-panel-closed search-panel absolute md:w-[30rem]
top-20 left-4 md:left-[unset] right-4 shadow-2xl rounded-2xl p-2 svelte-1wah7ro"><div id="search-bar-inside" class="flex relative lg:hidden transition-all items-center h-11 rounded-xl
      bg-black/[0.04] hover:bg-black/[0.06] focus-within:bg-black/[0.06]
      dark:bg-white/5 dark:hover:bg-white/10 dark:focus-within:bg-white/10
  "><!> <input placeholder="Search" class="pl-10 absolute inset-0 text-sm bg-transparent outline-0
               focus:w-60 text-black/50 dark:text-white/50 svelte-1wah7ro"/></div> <!></div>`,1);function Le(D,G){ie(G,!1);let i=g(""),s=g(""),f=g([]),x=!1,o=g(!1);const he=[{url:q("/"),meta:{title:"This Is a Fake Search Result"},excerpt:"Because the search cannot work in the <mark>dev</mark> environment."},{url:q("/"),meta:{title:"If You Want to Test the Search"},excerpt:"Try running <mark>npm build && npm preview</mark> instead."}],H=async()=>{await S.togglePanel("search-panel")},k=async(a,t)=>{t&&await S.togglePanel("search-panel",a)},J=async()=>{await S.closePanel("search-panel"),n(i,""),n(s,""),n(f,[])},N=(a,t)=>{a.preventDefault(),J(),ce(t)},h=async(a,t)=>{if(!a){k(!1,t),n(f,[]);return}if(e(o))try{let r=[];if(x&&window.pagefind){const p=await window.pagefind.search(a);r=await Promise.all(p.results.map(v=>v.data()))}else r=[],console.error("Pagefind is not available in production environment.");n(f,r),k(e(f).length>0,t)}catch(r){console.error("Search error:",r),n(f,[]),k(!1,t)}finally{}};$(()=>{const a=()=>{n(o,!0),x=typeof window<"u"&&!!window.pagefind&&typeof window.pagefind.search=="function",console.log("Pagefind status on init:",x),e(i)&&h(e(i),!0),e(s)&&h(e(s),!1)};document.addEventListener("pagefindready",()=>{console.log("Pagefind ready event received."),a()}),document.addEventListener("pagefindloaderror",()=>{console.warn("Pagefind load error event received. Search functionality will be limited."),a()}),setTimeout(()=>{e(o)||(console.log("Fallback: Initializing search after timeout."),a())},2e3)}),E(()=>(e(o),e(i)),()=>{e(o)&&e(i)&&(async()=>await h(e(i),!0))()}),E(()=>(e(o),e(s)),()=>{e(o)&&e(s)&&(async()=>await h(e(s),!1))()}),ae(),ee();var I=fe(),y=te(I),T=c(y);w(T,{icon:"material-symbols:search",class:"absolute text-[1.25rem] pointer-events-none ml-3 transition my-auto text-black/30 dark:text-white/30"});var m=l(T,2);C(m),d(y);var u=l(y,2),O=c(u);w(O,{icon:"material-symbols:search",class:"text-[1.25rem]"}),d(u);var R=l(u,2),_=c(R),z=c(_);w(z,{icon:"material-symbols:search",class:"absolute text-[1.25rem] pointer-events-none ml-3 transition my-auto text-black/30 dark:text-white/30"});var L=l(z,2);C(L),d(_);var Q=l(_,2);se(Q,1,()=>e(f),oe,(a,t)=>{var r=de(),p=c(r),v=c(p,!0),U=l(v);w(U,{icon:"fa6-solid:chevron-right",class:"transition text-[0.75rem] translate-x-1 my-auto text-[var(--primary)]"}),d(p);var M=l(p,2),X=c(M);le(X,()=>(e(t),b(()=>e(t).excerpt))),d(M),d(r),F(()=>{K(r,"href",(e(t),b(()=>e(t).url))),ne(v,(e(t),b(()=>e(t).meta.title)))}),P("click",r,Z=>N(Z,e(t).url)),j(a,r)}),d(R),F(a=>K(m,"placeholder",a),[()=>(B(Y),B(W),b(()=>Y(W.search)))]),V(m,()=>e(i),a=>n(i,a)),P("focus",m,()=>h(e(i),!0)),P("click",u,H),V(L,()=>e(s),a=>n(s,a)),j(D,I),re()}export{Le as default};
